FROM jrei/systemd-ubuntu:20.04

ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get update
RUN apt install -y python3 python3-dev python3-pip
RUN update-alternatives --install /usr/bin/python python /usr/bin/python3 1

# for Python packages that insist on compiling during 'pip install'
RUN apt install -y build-essential

WORKDIR /app
RUN pip install virtualenv
COPY ./installer/install-hypercane.sh .
RUN ./install-hypercane.sh -- --mongodb-url mongodb://localhost/csHypercane

EXPOSE 8000
